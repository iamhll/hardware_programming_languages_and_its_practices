.. -----------------------------------------------------------------------------
   ..
   ..  Filename       : index.rst
   ..  Author         : Huang Leilei
   ..  Status         : draft
   ..  Created        : 2025-02-18
   ..  Description    : about script
   ..
.. -----------------------------------------------------------------------------

About Script
============

   Directory *script* contains **three** different kinds of scripts

*  :get: generation or calculation tools
*  :analysis: analysis tools or environments
*  :run: regression or automation environments


Get
---

   Directory *get* contains generation tools, which may contain tools like

*  generation tools to produce test vectors
*  calculation tools to get SNR, PSNR results


Analysis
--------

   Directory *analysis* contains analysis tools or environments, which may contain tools or environments like

*  analysis tools to process the output of C models
*  analysis environments to process the intermediate data of C models
*  analysis environments to do pre-researches


Run
---

   Directory *run* contains regression or automation environments, which may contain environments like

*  automation environments to do updates or checks
*  regression environments to run C models


Existing Environments
---------------------

   Information on several existing environments is listed below.


getAyuv1555FromYuv420p
``````````````````````

*  Function

   #. |  generate test vectors according to the information specified by parameter *CSTR_INFO_ITEM_ALL*
      |  and save them to directory *CSTR_DIR_OUT* (sure, this script converts yuv420p files to ayuv1555 files)

*  Dependency

      .. table::
         :align: left
         :widths: auto

         ========= ============
          item      my version
         ========= ============
          python3   3.8.10
         ========= ============

*  Content

      .. table::
         :align: left
         :widths: auto

         ====================================== ================================= ============
          item                                   description                       postscript
         ====================================== ================================= ============
          getAyuv1555FromYuv420p.sh              generating script (top)
          getAyuv1555FromYuv444pKnl.py           generating script (kernel)
          /mnt/e/DOWNLOAD/SEQUENCE/HM_AYUV1555   directory for generated vectors   generated by command *getAyuv1555FromYuv420p.sh*
         ====================================== ================================= ============

*  Usage

      |  In WSL environment, change directory to *script/get/getAyuv1555FromYuv420p*,
      |  then you can

   #. try the above functions with

      ::

         ./getAyuv1555FromYuv420p.sh

      then you will get

      .. \++++++ uncommented to help the decision of width

      .. image:: scriptGetAyuv1555FromYuv420p.png
         :width: 750


runListUpdate
`````````````

*  Function

   #. update auto-generated codes like *cfg_\*.cpp*
   #. convert files from DOS format to UNIX format
   #. delete trailing blanks
   #. collect markers like *TODO*, *NOTE*, *???* or *!!!*
   #. collect file status (draft, phase ??? or something alike)
   #. remove empty directory

*  Dependency

      none

*  Content

      .. table::
         :align: left
         :widths: auto

         ================== ====================================== ============
          item               description                            postscript
         ================== ====================================== ============
          runListUpdate.sh   3.8.10
          dump               directory for collected informations   generated by command *./runListUpdate.sh*
         ================== ====================================== ============

*  Usage

      |  In WSL environment, change directory to *script/run/runListUpdate*,
      |  then you can

   *  try the above functions with

      ::

         ./runListUpdate.sh

      then you will get

      .. \++++++ uncommented to help the decision of width

      .. image:: scriptRunListUpdate_usage1.png
         :width: 350

      \

      .. \++++++ uncommented to help the decision of width

      .. image:: scriptRunListUpdate_usage2.png
         :width: 790


runXkmsc
````````

*  Function

   #. generate executable file *xkmsc*
   #. create a directory named with session\ *CSTR_TAG* (session tag, default value is Test)
   #. copy run script *runXkmsc.sh*, executable file *xkmsc*, configuration file *xkmsc.cfg* to directory session\ *CSTR_TAG*
   #. change directory to session\ *CSTR_TAG* and automatically run *xkmsc* to process test vectors specified with parameter *CSTR_DIR_VECT* (vector directory) and *CSTR_INFO_VECT_ALL* (vector information)
   #. calculate and note down md5sum of output files
   #. do correctness check (does not exist in this environment)
   #. extract/calculate and notedown SNR, PSNR or other performance related information (does not exist in this environment)
   #. change directory back

*  Dependency

      .. table::
         :align: left
         :widths: auto

         ========= ============
          item      my version
         ========= ============
          gcc, g++  9.3.0
          Make      4.2.1
          cmake     3.16.3
          md5sum    8.30
         ========= ============

*  Content

      .. table::
         :align: left
         :widths: auto

         ============= ==================== ============
          File Name     Descriptions         postscript
         ============= ==================== ============
          makefile      makefile
          runXkmsc.sh   regression script
          xkmsc.cfg     configuration file
          sessionTest   regression session   generated by command *make run*
         ============= ==================== ============

*  Usage

      |  In WSL environment, change directory to *script/run/runXkmsc*,
      |  then you can

   #. view help with

      ::

         make

      then you will get

      .. \++++++ uncommented to help the decision of width

      .. image:: scriptRunXkmsc_make.png
         :width: 670

   #. try the above functions with

      ::

         make run

      then you will get

      .. \++++++ uncommented to help the decision of width

      .. image:: scriptRunXkmsc_make_run_0.png
         :width: 695

      \.\.\.

      .. \++++++ uncommented to help the decision of width

      .. image:: scriptRunXkmsc_make_run_1.png
         :width: 1075

      \.\.\.

      .. \++++++ uncommented to help the decision of width

      .. image:: scriptRunXkmsc_make_run_2.png
         :width: 800

      \.\.\.

      .. \++++++ uncommented to help the decision of width

      .. image:: scriptRunXkmsc_make_run_3.png
         :width: 590

   #. clean files with

      ::

         make clean

      or

      ::

         make clean_all

      then you will get

      .. \++++++ uncommented to help the decision of width

      .. image:: scriptRunXkmsc_make_clean.png
         :width: 1080
